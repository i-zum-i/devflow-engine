## **DevFlow Engine 機能一覧**

| ドキュメントバージョン | 1.0 |
| :--- | :--- |
| **作成日** | 2025年8月19日 |

### **ユーザー向け機能**

| 機能ID | 機能名 | 概要 | 主要な関連コンポーネント |
| :--- | :--- | :--- | :--- |
| **UI-001** | **セッション開始とPR自動作成** | ユーザーがリポジトリURLと自然言語プロンプトを入力し、セッションを開始する機能。バックエンドはコンテナを起動し、プロンプトに基づいたコード編集とPR作成を自動で行う。 | React, API Gateway, Lambda (`start_session`), ECS, DynamoDB, GitHub API |
| **UI-002** | **追加プロンプト実行** | 進行中のセッションに対して、追加のプロンプトを送信する機能。既存のコンテナとPRに対して、さらなるコード編集を自動で実行・反映させる。 | React, API Gateway, Lambda (`execute_prompt`), ECS Exec |
| **UI-003** | **実行履歴の表示** | 送信したプロンプト、それによって作成/更新されたPRのコメントやGitHubリンクを時系列で一覧表示する機能。 | React, API Gateway, Lambda (`get_status`), DynamoDB |
| **UI-004** | **Web Editorへのアクセス** | 実行中の`code-server`環境へ直接アクセスするためのURLを取得し、別タブで開く機能。自動編集結果の確認や手動での微調整を可能にする。 | React, API Gateway, Lambda (`get_editor_url`), ECS |
| **UI-005** | **セッションの終了** | 現在のセッションを終了し、起動中のECSコンテナを破棄する機能。リソースを解放し、コストを最適化する。 | React, API Gateway, Lambda (`stop_session`), ECS, DynamoDB |

\<br\>

### **バックエンド・システム機能**

| 機能ID | 機能名 | 概要 | 主要な関連コンポーネント |
| :--- | :--- | :--- | :--- |
| **BE-001** | **オンデマンドなコンテナ管理** | ユーザーリクエストに応じて、ECS Fargateタスク（`code-server`コンテナ）を動的に起動・停止・破棄する機能。 | AWS Lambda, Amazon ECS on Fargate |
| **BE-002** | **セッション状態管理** | ユーザーセッションとECSタスクID、リポジトリ情報などを紐づけ、状態を永続化する機能。複数ユーザーの同時利用を可能にする。 | AWS Lambda, Amazon DynamoDB |
| **BE-003** | **AIによる非対話型コード編集** | コンテナ内で`claudecode`を起動し、渡されたプロンプトに基づいて対象リポジトリのコードを自動で編集・保存する機能。 | Docker (`claudecode`), Custom Scripts |
| **BE-004** | **セキュアなGitHub連携** | GitHub App認証を利用し、短命なアクセストークンを動的に生成してGitHub APIと通信する機能。リポジトリのクローン、プッシュ、PR作成を行う。 | Docker (`gh` CLI), AWS Lambda, AWS Secrets Manager |