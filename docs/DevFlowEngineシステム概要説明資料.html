<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevFlow Engine システム概要説明資料</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', 'Noto Sans JP', sans-serif;
        }
        .diagram-arrow {
            position: absolute;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6b7280;
        }
        .diagram-arrow-line {
            background-color: #6b7280;
        }
        .diagram-arrow-head {
            border-color: #6b7280;
        }
        .flow-arrow {
            flex-shrink: 0;
            color: #9ca3af;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-6xl">

        <!-- Header -->
        <header class="bg-white rounded-xl shadow-lg p-8 mb-8 border border-gray-200">
            <h1 class="text-4xl font-bold text-gray-900">DevFlow Engine</h1>
            <p class="mt-2 text-lg text-gray-600">
                自然言語プロンプトを起点とし、コードの自動編集、プルリクエスト作成、一時的な開発環境の提供までをシームレスに行う、オンデマンド型AI開発支援システム。
            </p>
        </header>

        <!-- System Goal -->
        <section class="bg-white rounded-xl shadow-lg p-8 mb-8 border border-gray-200">
            <h2 class="text-2xl font-bold text-gray-900 border-b-2 border-gray-200 pb-3 mb-6">システムの目的とゴール</h2>
            <div class="grid md:grid-cols-3 gap-6">
                <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                    <h3 class="font-semibold text-lg text-gray-800">🚀 開発サイクルの高速化</h3>
                    <p class="text-gray-600 mt-2">プロンプト入力からPR作成までの時間を平均5分以内に短縮します。</p>
                </div>
                <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                    <h3 class="font-semibold text-lg text-gray-800">✨ レビュー品質の向上</h3>
                    <p class="text-gray-600 mt-2">PR本文への自動記載により、レビュアーのコンテキスト理解を助けます。</p>
                </div>
                <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                    <h3 class="font-semibold text-lg text-gray-800">💰 環境構築コストの削減</h3>
                    <p class="text-gray-600 mt-2">オンデマンドのクリーンな開発環境で、ローカル環境の問題を解消します。</p>
                </div>
            </div>
        </section>

        <!-- System Architecture -->
        <section class="bg-white rounded-xl shadow-lg p-8 mb-8 border border-gray-200">
            <h2 class="text-2xl font-bold text-gray-900 border-b-2 border-gray-200 pb-3 mb-6">システム構成図</h2>
            <div class="relative p-4 md:p-8 bg-gray-50 rounded-lg border border-gray-200">
                <div class="grid grid-cols-1 md:grid-cols-5 gap-6 items-center">
                    
                    <!-- User -->
                    <div class="flex flex-col items-center p-4 bg-white rounded-lg shadow-md border">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-10 h-10 text-indigo-500"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                        <span class="mt-2 font-semibold">User</span>
                    </div>

                    <!-- Frontend -->
                    <div class="flex flex-col items-center p-4 bg-white rounded-lg shadow-md border">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-10 h-10 text-blue-500"><path d="m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.59a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
                        <span class="mt-2 font-semibold">React Web App</span>
                    </div>

                    <!-- Backend (API Gateway & Lambda) -->
                    <div class="p-4 bg-white rounded-lg shadow-md border col-span-1 md:col-span-1">
                        <div class="text-center font-semibold mb-4">Backend Logic</div>
                        <div class="space-y-3">
                            <div class="p-3 bg-gray-100 rounded text-center text-sm">API Gateway</div>
                            <div class="flex justify-center">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-gray-400"><line x1="12" y1="5" x2="12" y2="19"></line><polyline points="19 12 12 19 5 12"></polyline></svg>
                            </div>
                            <div class="p-3 bg-yellow-100 border border-yellow-300 rounded text-center text-sm">AWS Lambda</div>
                        </div>
                    </div>

                    <!-- Container & State -->
                    <div class="p-4 bg-white rounded-lg shadow-md border col-span-1 md:col-span-2 grid grid-cols-2 gap-4">
                        <div class="flex flex-col items-center p-3 bg-blue-100 border border-blue-300 rounded">
                             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8 text-blue-600"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
                            <span class="mt-2 font-semibold text-sm text-center">ECS on Fargate</span>
                            <span class="text-xs text-gray-500 text-center">Container Service</span>
                        </div>
                        <div class="space-y-2">
                            <div class="flex flex-col items-center p-3 bg-purple-100 border border-purple-300 rounded">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 text-purple-600"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect><line x1="3" y1="9" x2="21" y2="9"></line><line x1="3" y1="15" x2="21" y2="15"></line><line x1="9" y1="3" x2="9" y2="21"></line><line x1="15" y1="3" x2="15" y2="21"></line></svg>
                                <span class="mt-1 font-semibold text-sm">DynamoDB</span>
                                <span class="text-xs text-gray-500">State</span>
                            </div>
                            <div class="flex flex-col items-center p-3 bg-green-100 border border-green-300 rounded">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 text-green-600"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                                <span class="mt-1 font-semibold text-sm">Secrets Manager</span>
                                <span class="text-xs text-gray-500">Secrets</span>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Arrows for larger screens -->
                <div class="hidden md:block absolute top-0 left-0 w-full h-full">
                    <div class="diagram-arrow" style="top: 50%; left: 10%; transform: translateY(-50%);">
                        <div class="diagram-arrow-line w-8 h-0.5"></div>
                        <div class="diagram-arrow-head w-0 h-0 border-t-[5px] border-t-transparent border-b-[5px] border-b-transparent border-l-[8px]"></div>
                    </div>
                    <div class="diagram-arrow" style="top: 50%; left: 30%; transform: translateY(-50%);">
                        <div class="diagram-arrow-line w-8 h-0.5"></div>
                        <div class="diagram-arrow-head w-0 h-0 border-t-[5px] border-t-transparent border-b-[5px] border-b-transparent border-l-[8px]"></div>
                    </div>
                    <div class="diagram-arrow" style="top: 50%; left: 50%; transform: translate(-50%, -50%);">
                        <div class="diagram-arrow-line w-8 h-0.5"></div>
                        <div class="diagram-arrow-head w-0 h-0 border-t-[5px] border-t-transparent border-b-[5px] border-b-transparent border-l-[8px]"></div>
                    </div>
                </div>
            </div>
            <div class="mt-6 text-center text-gray-600">
                <p>ユーザーからのリクエストは、ReactアプリからAPI Gatewayを経由し、Lambda関数をトリガーします。LambdaはECS Fargate上でコンテナタスクを起動・管理し、DynamoDBとSecrets Managerを利用して状態と機密情報を扱います。</p>
            </div>
        </section>

        <!-- Use Cases -->
        <section class="bg-white rounded-xl shadow-lg p-8 mb-8 border border-gray-200">
            <h2 class="text-2xl font-bold text-gray-900 border-b-2 border-gray-200 pb-3 mb-6">主なユースケース</h2>
            
            <h3 class="text-xl font-semibold text-gray-800 mb-4">👨‍💻 開発者向け</h3>
            <div class="grid md:grid-cols-2 gap-6">

                <!-- UC-001 -->
                <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 flex flex-col">
                    <div class="flex items-start mb-3">
                        <div class="bg-indigo-100 text-indigo-600 p-2 rounded-full mr-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M15.63 3.08a2 2 0 0 0-.05 3.54l4.34 4.34a2 2 0 0 0 3.54-.05l.88-1.76a2 2 0 0 0-2.6-2.6z"/><path d="m14 7.5-4.5 4.5"/><path d="M11.5 10.5c-2.34 2.34-6.31 6.31-6.31 6.31a2 2 0 0 0 2.83 2.83l6.31-6.31"/><path d="M4 20h.01"/></svg>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg text-gray-800">PRを自動作成する</h4>
                            <p class="text-sm text-gray-500">UC-001</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4 text-sm">GitHubリポジトリと自然言語プロンプトを基に、コード編集からPR作成までを完全に自動化します。</p>
                    <div class="mt-auto flex items-center justify-between text-xs text-center text-gray-700 space-x-2">
                        <div class="p-2 bg-white border rounded-md flex-1">プロンプト<br>入力</div>
                        <svg class="flow-arrow w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                        <div class="p-2 bg-white border rounded-md flex-1">AIが<br>コード編集</div>
                        <svg class="flow-arrow w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                        <div class="p-2 bg-white border rounded-md flex-1">GitHubに<br>PR作成</div>
                    </div>
                </div>

                <!-- UC-002 -->
                <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 flex flex-col">
                    <div class="flex items-start mb-3">
                        <div class="bg-blue-100 text-blue-600 p-2 rounded-full mr-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M12 5v14"/><path d="M5 12h14"/></svg>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg text-gray-800">追加の修正を指示する</h4>
                            <p class="text-sm text-gray-500">UC-002</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4 text-sm">進行中のセッションに対し、追加プロンプトでさらなる修正を指示。既存のPRが更新されます。</p>
                    <div class="mt-auto flex items-center justify-between text-xs text-center text-gray-700 space-x-2">
                        <div class="p-2 bg-white border rounded-md flex-1">追加<br>プロンプト</div>
                        <svg class="flow-arrow w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                        <div class="p-2 bg-white border rounded-md flex-1">AIが<br>コード再編集</div>
                        <svg class="flow-arrow w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                        <div class="p-2 bg-white border rounded-md flex-1">既存PRを<br>更新</div>
                    </div>
                </div>

                <!-- UC-003 -->
                <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 flex flex-col">
                    <div class="flex items-start mb-3">
                        <div class="bg-green-100 text-green-600 p-2 rounded-full mr-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><polyline points="16 18 22 12 16 6"/><polyline points="8 6 2 12 8 18"/></svg>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg text-gray-800">コードを手動で編集する</h4>
                            <p class="text-sm text-gray-500">UC-003</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4 text-sm">WebベースのIDEにアクセスし、自動編集されたコードの確認や微調整を行います。</p>
                    <div class="mt-auto flex items-center justify-center text-xs text-center text-gray-700 space-x-2">
                         <div class="p-2 bg-white border rounded-md flex-1">「Editor」<br>ボタンクリック</div>
                        <svg class="flow-arrow w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                        <div class="p-2 bg-white border rounded-md flex-1">Web IDEで<br>手動編集</div>
                    </div>
                </div>

                <!-- UC-005 -->
                <div class="bg-gray-50 p-6 rounded-lg border border-gray-200 flex flex-col">
                    <div class="flex items-start mb-3">
                        <div class="bg-red-100 text-red-600 p-2 rounded-full mr-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M18.36 6.64a9 9 0 1 1-12.73 0"/><line x1="12" y1="2" x2="12" y2="12"/></svg>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg text-gray-800">開発環境を終了する</h4>
                            <p class="text-sm text-gray-500">UC-005</p>
                        </div>
                    </div>
                    <p class="text-gray-600 mb-4 text-sm">作業完了したセッションの開発環境（ECSコンテナ）を破棄し、リソースを解放します。</p>
                     <div class="mt-auto flex items-center justify-center text-xs text-center text-gray-700 space-x-2">
                         <div class="p-2 bg-white border rounded-md flex-1">「Clear」<br>ボタンクリック</div>
                        <svg class="flow-arrow w-6 h-6" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                        <div class="p-2 bg-white border rounded-md flex-1">コンテナ停止 &<br>リソース解放</div>
                    </div>
                </div>
            </div>

            <h3 class="text-xl font-semibold text-gray-800 mt-8 mb-4">🛠️ システム管理者向け</h3>
            <div class="grid md:grid-cols-2 gap-6">
                 <!-- UC-006 -->
                <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                    <div class="flex items-start mb-3">
                        <div class="bg-gray-200 text-gray-700 p-2 rounded-full mr-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/></svg>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg text-gray-800">システムを初期設定する</h4>
                            <p class="text-sm text-gray-500">UC-006</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm">AWSリソースのデプロイと、GitHub Appの作成・認証情報の設定を行います。</p>
                </div>
                <!-- UC-007 -->
                <div class="bg-gray-50 p-6 rounded-lg border border-gray-200">
                    <div class="flex items-start mb-3">
                        <div class="bg-gray-200 text-gray-700 p-2 rounded-full mr-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M2.5 2v6h6M21.5 22v-6h-6"/><path d="M22 11.5A10 10 0 0 0 3.5 12.5"/><path d="M2 12.5a10 10 0 0 0 18.5-1"/></svg>
                        </div>
                        <div>
                            <h4 class="font-bold text-lg text-gray-800">システムを監視・運用する</h4>
                            <p class="text-sm text-gray-500">UC-007</p>
                        </div>
                    </div>
                    <p class="text-gray-600 text-sm">CloudWatch等を利用してシステムの稼働状況（ログ、メトリクス）を監視し、安定稼働を維持します。</p>
                </div>
            </div>
        </section>

        <!-- Tech Stack -->
        <section class="bg-white rounded-xl shadow-lg p-8 border border-gray-200">
            <h2 class="text-2xl font-bold text-gray-900 border-b-2 border-gray-200 pb-3 mb-6">技術スタック</h2>
            <div class="overflow-x-auto">
                <table class="w-full text-left border-collapse">
                    <thead class="bg-gray-100">
                        <tr>
                            <th class="p-4 font-semibold border-b-2 border-gray-200">領域</th>
                            <th class="p-4 font-semibold border-b-2 border-gray-200">技術</th>
                            <th class="p-4 font-semibold border-b-2 border-gray-200">目的</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200">
                        <tr><td class="p-4">フロントエンド</td><td class="p-4">React</td><td class="p-4">ユーザーインターフェースの構築</td></tr>
                        <tr><td class="p-4">API</td><td class="p-4">Amazon API Gateway</td><td class="p-4">RESTful APIのエンドポイント提供</td></tr>
                        <tr><td class="p-4">バックエンド</td><td class="p-4">AWS Lambda (Python)</td><td class="p-4">ビジネスロジックの実行</td></tr>
                        <tr><td class="p-4">状態管理</td><td class="p-4">Amazon DynamoDB</td><td class="p-4">セッションとECSタスクのマッピング</td></tr>
                        <tr><td class="p-4">コンテナ実行</td><td class="p-4">Amazon ECS on Fargate</td><td class="p-4">`code-server`コンテナの実行</td></tr>
                        <tr><td class="p-4">Web IDE</td><td class="p-4">code-server</td><td class="p-4">インタラクティブなWeb Editor</td></tr>
                        <tr><td class="p-4">AIコード編集</td><td class="p-4">claudecode</td><td class="p-4">プロンプトベースのコード編集</td></tr>
                        <tr><td class="p-4">GitHub連携</td><td class="p-4">GitHub CLI, GitHub App</td><td class="p-4">PR作成、リポジトリ操作の自動化</td></tr>
                        <tr><td class="p-4">秘密情報管理</td><td class="p-4">AWS Secrets Manager</td><td class="p-4">APIキー、秘密鍵の保管</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center text-gray-500 py-8">
            <p>&copy; 2025 DevFlow Engine Project. All rights reserved.</p>
        </footer>

    </div>

</body>
</html>
